
set -euo pipefail

# –ü–∞–ø–∫–∞ —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º –ø—Ä–µ–ø–æ–¥–∞ (mfua)
TEACHER_REPO="/c/Users/dncik/Desktop/mfua"

# –ü–∞–ø–∫–∞ —Å —Ç–≤–æ–∏–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º (PITPO)
MY_REPO="/c/Users/dncik/Desktop/PITPO"

echo "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ø—Ä–µ–ø–æ–¥–∞ (mfua)..."
cd "$TEACHER_REPO"
git pull

echo "üìÅ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ mfua –≤ PITPO (–±–µ–∑ .git)..."
rsync -a --exclude='.git' "$TEACHER_REPO/" "$MY_REPO/"


echo "‚úÖ –§–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–º–º–∏—Ç–∞ –≤ PITPO..."
cd "$MY_REPO"

echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞..."
git status

# –ï—Å–ª–∏ –Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Äî –≤—ã—Ö–æ–¥–∏–º
if git diff --quiet; then
    echo "–ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞. –ì–æ—Ç–æ–≤–æ!"
    exit 0
fi

echo "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∏–Ω–¥–µ–∫—Å..."
git add .

# –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–æ–º–º–∏—Ç–∞
read -p "–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ (–∏–ª–∏ Enter –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞): " commit_message

if [ -z "$commit_message" ]; then
    echo "–ö–æ–º–º–∏—Ç –æ—Ç–º–µ–Ω—ë–Ω."
    exit 0
fi

echo "–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞: $commit_message"
git commit -m "$commit_message"

echo "üöÄ –ü—É—à –≤ —Ç–≤–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (origin main)..."
git push origin main

echo "üéâ –í—Å—ë –≥–æ—Ç–æ–≤–æ! PITPO –æ–±–Ω–æ–≤–ª—ë–Ω —Ñ–∞–π–ª–∞–º–∏ –ø—Ä–µ–ø–æ–¥–∞ –∏ –∑–∞–ø—É—à–µ–Ω."

